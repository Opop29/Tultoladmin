import{j as s,v as u,d as g,w as y,x as k,y as f,z as b,e as M,f as z,A as B,B as H,C,D as I,E as t,F as i,G as n,k as a}from"./ionic-BrgaFwls.js";import{u as P,r}from"./vendor-NXI3fooF.js";import{l as F,a as G,b as T,t as Q,c as w,m as U,d as V,e as q,f as K,g as O}from"./index-Bxoun5Mz.js";import{s as W}from"./supabaseClient-DzfNh-zC.js";/* empty css             */import"./supabase-Dfjzly43.js";const es=()=>{const m=P(),[d,x]=r.useState(!1),[l,A]=r.useState(null),[j,p]=r.useState(!0);r.useEffect(()=>{N()},[]);const N=async()=>{try{p(!0);const{data:e,error:o}=await W.from("ar_pois").select("id, label, mark_type, color, created_at, lat, lng").order("created_at",{ascending:!1});if(o)throw o;const S=e?.length||0,E=e?.slice(0,5)||[],h={};e?.forEach(_=>{const v=_.mark_type||"Unknown";h[v]=(h[v]||0)+1}),A({totalMarkers:S,recentMarkers:E,markersByType:h})}catch(e){console.error("Error loading dashboard data:",e)}finally{p(!1)}},D=async e=>{await N(),e.detail.complete()},L=()=>{x(!0),m.push("/Tultoladmin/enter-passcode"),x(!1)},c=e=>{m.push(e)},R=e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}};return j?s.jsxs(u,{children:[s.jsx(g,{children:s.jsxs(y,{children:[s.jsx(k,{slot:"start",children:s.jsx(f,{})}),s.jsx(b,{children:"Home"})]})}),s.jsx(M,{className:"ion-padding ion-text-center home-content",children:s.jsx("div",{className:"loading-container",children:s.jsx(z,{isOpen:j,message:"Loading dashboard...",spinner:"crescent"})})})]}):s.jsx(s.Fragment,{children:s.jsxs(u,{children:[s.jsx(g,{children:s.jsxs(y,{children:[s.jsx(k,{slot:"start",children:s.jsx(f,{})}),s.jsx(b,{children:"Home"})]})}),s.jsxs(M,{className:"home-content",children:[s.jsx(B,{slot:"fixed",onIonRefresh:D,children:s.jsx(H,{})}),s.jsxs("div",{className:"floating-shapes",children:[s.jsx("div",{className:"shape-1"}),s.jsx("div",{className:"shape-2"}),s.jsx("div",{className:"shape-3"}),s.jsx("div",{className:"shape-4"}),s.jsx("div",{className:"shape-5"})]}),s.jsx("div",{className:"wave-overlay"}),d&&s.jsx("div",{className:"global-blur"}),s.jsx(z,{isOpen:d,message:"Signing out...",spinner:"crescent"}),s.jsxs("div",{className:"dashboard-container",children:[s.jsx("div",{className:"dashboard-section hero-section",children:s.jsxs("div",{className:"home-hero",children:[s.jsx("div",{className:"floating-particles"}),s.jsxs("div",{className:"hero-content",children:[s.jsx("div",{className:"hero-logo",children:s.jsx("img",{src:F,alt:"Logo",className:"app-logo enhanced-logo"})}),s.jsxs("h1",{className:"home-title",children:[s.jsx("span",{className:"title-main",children:"ðŸ›ï¸ Tultol"}),s.jsx("span",{className:"title-accent",children:"-AD"})]}),s.jsxs("div",{className:"hero-taglines",children:[s.jsx("p",{className:"tagline-primary",children:"Welcome back! Administer your AR marker ecosystem"}),s.jsx("p",{className:"tagline-secondary",children:"âœ¨ Manage â€¢ Monitor â€¢ Control"}),s.jsx("p",{className:"tagline-tertiary",children:"ðŸš€ Admin Panel for Tultola-AR"})]})]})]})}),s.jsxs("div",{className:"dashboard-section stats-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"ðŸ“Š System Overview"}),s.jsx("p",{className:"section-subtitle",children:"Key metrics and statistics at a glance"})]}),s.jsx("div",{className:"section-content",children:s.jsx(C,{className:"stats-grid",children:s.jsxs(I,{children:[s.jsx(t,{size:"6",sizeMd:"6",sizeLg:"3",children:s.jsx(i,{className:"stat-card total-markers",onClick:()=>c("/Tultoladmin/report"),children:s.jsxs(n,{children:[s.jsx("div",{className:"stat-icon",children:s.jsx(a,{icon:G})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h2",{children:l?.totalMarkers||0}),s.jsx("p",{children:"Total Markers"})]})]})})}),s.jsx(t,{size:"6",sizeMd:"6",sizeLg:"3",children:s.jsx(i,{className:"stat-card marker-types",onClick:()=>c("/Tultoladmin/report"),children:s.jsxs(n,{children:[s.jsx("div",{className:"stat-icon",children:s.jsx(a,{icon:T})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h2",{children:Object.keys(l?.markersByType||{}).length}),s.jsx("p",{children:"Marker Types"})]})]})})}),s.jsx(t,{size:"6",sizeMd:"6",sizeLg:"3",children:s.jsx(i,{className:"stat-card recent-activity",onClick:()=>c("/Tultoladmin/builded"),children:s.jsxs(n,{children:[s.jsx("div",{className:"stat-icon",children:s.jsx(a,{icon:Q})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h2",{children:l?.recentMarkers.length||0}),s.jsx("p",{children:"Recent Activity"})]})]})})}),s.jsx(t,{size:"6",sizeMd:"6",sizeLg:"3",children:s.jsx(i,{className:"stat-card quick-actions",onClick:()=>c("/Tultoladmin/MapMarker"),children:s.jsxs(n,{children:[s.jsx("div",{className:"stat-icon",children:s.jsx(a,{icon:w})}),s.jsxs("div",{className:"stat-content",children:[s.jsx("h2",{children:"+"}),s.jsx("p",{children:"Quick Actions"})]})]})})})]})})})]}),s.jsx("div",{className:"dashboard-section map-section",children:s.jsx("div",{className:"section-content",children:s.jsx("div",{className:"map-display-container",children:s.jsxs("div",{className:"map-display",children:[s.jsxs("div",{className:"map-overlay",children:[s.jsx("div",{className:"map-title",children:"Interactive Campus Map"}),s.jsx("div",{className:"map-subtitle",children:"Explore AR markers across the university"})]}),s.jsxs("div",{className:"map-grid",children:[s.jsx("div",{className:"grid-line horizontal"}),s.jsx("div",{className:"grid-line horizontal"}),s.jsx("div",{className:"grid-line horizontal"}),s.jsx("div",{className:"grid-line vertical"}),s.jsx("div",{className:"grid-line vertical"}),s.jsx("div",{className:"grid-line vertical"})]}),s.jsxs("div",{className:"map-markers",children:[s.jsx("div",{className:"map-marker-pulse",style:{top:"30%",left:"25%",animationDelay:"0s"}}),s.jsx("div",{className:"map-marker-pulse",style:{top:"45%",left:"60%",animationDelay:"1s"}}),s.jsx("div",{className:"map-marker-pulse",style:{top:"65%",left:"40%",animationDelay:"2s"}}),s.jsx("div",{className:"map-marker-pulse",style:{top:"25%",left:"70%",animationDelay:"0.5s"}}),s.jsx("div",{className:"map-marker-pulse",style:{top:"75%",left:"80%",animationDelay:"1.5s"}})]})]})})})}),s.jsxs("div",{className:"dashboard-section actions-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"ðŸš€ Quick Actions"}),s.jsx("p",{className:"section-subtitle",children:"Common administrative tasks and navigation"})]}),s.jsx("div",{className:"section-content",children:s.jsx(C,{className:"actions-grid",children:s.jsxs(I,{children:[s.jsx(t,{size:"6",sizeMd:"6",children:s.jsx(i,{className:"action-card",onClick:()=>c("/Tultoladmin/MapMarker"),children:s.jsxs(n,{children:[s.jsxs("div",{className:"action-content",children:[s.jsx(a,{icon:U}),s.jsxs("div",{children:[s.jsx("h3",{children:"Add New Marker"}),s.jsx("p",{children:"Place AR markers on the interactive map"})]})]}),s.jsx(a,{icon:w,className:"action-arrow"})]})})}),s.jsx(t,{size:"6",sizeMd:"6",children:s.jsx(i,{className:"action-card",onClick:()=>c("/Tultoladmin/builded"),children:s.jsxs(n,{children:[s.jsxs("div",{className:"action-content",children:[s.jsx(a,{icon:V}),s.jsxs("div",{children:[s.jsx("h3",{children:"Manage Markers"}),s.jsx("p",{children:"View, edit, and organize your markers"})]})]}),s.jsx(a,{icon:q,className:"action-arrow"})]})})}),s.jsx(t,{size:"6",sizeMd:"6",children:s.jsx(i,{className:"action-card",onClick:()=>c("/Tultoladmin/report"),children:s.jsxs(n,{children:[s.jsxs("div",{className:"action-content",children:[s.jsx(a,{icon:K}),s.jsxs("div",{children:[s.jsx("h3",{children:"View Analytics"}),s.jsx("p",{children:"Explore comprehensive reports and insights"})]})]}),s.jsx(a,{icon:T,className:"action-arrow"})]})})}),s.jsx(t,{size:"6",sizeMd:"6",children:s.jsx(i,{className:"action-card logout-card",onClick:L,disabled:d,children:s.jsxs(n,{children:[s.jsxs("div",{className:"action-content",children:[s.jsx(a,{icon:O}),s.jsxs("div",{children:[s.jsx("h3",{children:"Logout"}),s.jsx("p",{children:"Securely sign out of your account"})]})]}),s.jsx(a,{icon:O,className:"action-arrow"})]})})})]})})})]}),l?.recentMarkers&&l.recentMarkers.length>0&&s.jsxs("div",{className:"dashboard-section activity-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h2",{className:"section-title",children:"ðŸ“… Recent Activity"}),s.jsx("p",{className:"section-subtitle",children:"Latest marker additions and updates"})]}),s.jsx("div",{className:"section-content",children:s.jsx("div",{className:"recent-activity",children:l.recentMarkers.map((e,o)=>s.jsx(i,{className:"activity-card",onClick:()=>c("/Tultoladmin/builded"),children:s.jsx(n,{children:s.jsxs("div",{className:"activity-content",children:[s.jsx("div",{className:"activity-icon",children:s.jsx("div",{className:"marker-color-dot",style:{backgroundColor:e.color}})}),s.jsxs("div",{className:"activity-details",children:[s.jsx("h4",{children:e.label}),s.jsxs("p",{children:[e.mark_type," â€¢ ",R(e.created_at)]})]})]})})},e.id))})})]})]})]})]})})};export{es as default};
