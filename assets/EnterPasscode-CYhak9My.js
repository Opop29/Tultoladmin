import{Q as I,j as e,v as E,e as R,f as C,T as L,z as M,s as W}from"./ionic-Bk_P96ZF.js";import{r,u as z}from"./vendor-NXI3fooF.js";import{s as D}from"./supabaseClient-DzfNh-zC.js";import{l as P}from"./index-BCR8R_7f.js";/* empty css             */import"./supabase-Dfjzly43.js";const K=()=>{const[x,c]=r.useState(Array(6).fill("")),[j,d]=r.useState(0),[S,g]=r.useState(!1),[N,m]=r.useState(!1),[k,h]=r.useState(!1),[f,w]=r.useState(!1),[i,p]=r.useState(""),[o,u]=r.useState(""),n=r.useRef(null),b=z();I(()=>{setTimeout(()=>{const s=n.current;if(!s)return;let t=s.parentElement,a=!1;for(;t;){if(t.getAttribute&&t.getAttribute("aria-hidden")==="true"){a=!0;break}t=t.parentElement}a||s.focus()},0)}),r.useEffect(()=>{c(Array(6).fill("")),d(0),p(""),u(""),n.current&&(n.current.value="")},[]),r.useEffect(()=>{if(i){const s=setTimeout(()=>{c(Array(6).fill("")),d(0),p(""),u("")},1200);return()=>clearTimeout(s)}},[i]);const y=s=>{"vibrate"in navigator&&navigator.vibrate(s)},v=(s,t)=>{p(s),u(t)},A=async s=>{if(!s)return;g(!0);const{data:t,error:a}=await D.from("passcodes").select("*").eq("code",s.trim()).single();g(!1),a||!t?(y([200,100,200]),m(!0),setTimeout(()=>m(!1),500),v("âŒ Incorrect Passcode","error")):(y(150),v("âœ… Access Granted","success"),h(!0),setTimeout(()=>{h(!1),w(!0)},5e3))},T=s=>{let t=s.target.value.replace(/\D/g,"");t.length>6&&(t=t.slice(0,6));const a=t.split("");for(;a.length<6;)a.push("");c(a),d(a.findIndex(l=>l==="")),t.length===6&&A(t)};return r.useEffect(()=>{const s=()=>{setTimeout(()=>{n.current?.scrollIntoView({behavior:"smooth",block:"center"})},200)},t=n.current;return t&&t.addEventListener("focus",s),()=>{t&&t.removeEventListener("focus",s)}},[]),e.jsx(E,{children:e.jsxs(R,{className:"home-content",fullscreen:!0,inert:!!document.querySelector('ion-router-outlet[aria-hidden="true"]'),children:[e.jsxs("div",{className:"floating-shapes",children:[e.jsx("div",{className:"shape-1"}),e.jsx("div",{className:"shape-2"}),e.jsx("div",{className:"shape-3"}),e.jsx("div",{className:"shape-4"}),e.jsx("div",{className:"shape-5"})]}),e.jsx("div",{className:"wave-overlay"}),e.jsx(C,{isOpen:k,message:"Preparing your experience...",spinner:"crescent",translucent:!0}),e.jsx(L,{isOpen:f,header:"Welcome",message:"You have successfully logged in.",buttons:[{text:"OK",handler:()=>{console.log("Navigating to /Tultoladmin/home via alert OK");try{b.push("/Tultoladmin/home")}catch(s){console.error("Navigation failed:",s)}}}],onDidDismiss:()=>{if(f){console.log("Navigating to /Tultoladmin/home via alert dismiss");try{b.push("/Tultoladmin/home")}catch(s){console.error("Navigation failed:",s)}}}}),e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",zIndex:10},children:[e.jsxs("div",{style:{flex:"0 0 45%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",textAlign:"center"},children:[e.jsx("img",{src:P,alt:"Logo",className:"app-logo enhanced-logo",style:{marginBottom:"20px"}}),e.jsx(M,{className:"tech-title enhanced-title",style:{color:"rgba(255, 255, 255, 0.9)",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"25px",fontSize:"2.5rem"},children:"Tultol-AD"}),e.jsxs("div",{style:{maxWidth:"600px"},children:[e.jsx("h2",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"28px",fontWeight:"700",margin:"0 0 15px 0",textShadow:"0 3px 6px rgba(0, 0, 0, 0.4)",lineHeight:"1.2"},children:"ðŸ›ï¸ Augmented Reality Marker Management System"}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"18px",margin:"0",textShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",lineHeight:"1.4",fontWeight:"300"},children:"Administer and control AR markers across your campus ecosystem"})]})]}),e.jsx("div",{style:{flex:"0 0 55%",display:"flex",alignItems:"flex-start",justifyContent:"center",padding:"20px"},children:e.jsx("div",{className:"glass-card passcode-pin-container enhanced-card",style:{background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 12px 40px rgba(0, 0, 0, 0.2)",width:"100%",maxWidth:"500px",padding:"40px 30px",borderRadius:"20px",marginTop:"20px"},children:e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx("input",{ref:n,type:"tel",inputMode:"numeric",maxLength:6,value:x.join(""),onChange:T,className:"hidden-pass-input","aria-label":"Enter 6-digit passcode"}),e.jsx("div",{className:`pin-boxes enhanced-pin-boxes ${N?"shake":""}`,style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"20px"},children:x.map((s,t)=>e.jsx("div",{className:`pin-box enhanced-pin-box ${s?"filled":""} ${t===j?"active":""}`,onClick:()=>{let a=n.current?.parentElement,l=!1;for(;a;){if(a.getAttribute&&a.getAttribute("aria-hidden")==="true"){l=!0;break}a=a.parentElement}l||n.current?.focus()},tabIndex:0,"aria-label":s?"Filled":"Empty",style:{width:"50px",height:"50px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.3)",background:s?"rgba(59, 130, 246, 0.2)":"rgba(255, 255, 255, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",backdropFilter:"blur(10px)"},children:s?e.jsx("span",{className:"pin-dot",style:{width:"12px",height:"12px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.9)",display:"block"}}):e.jsx("span",{className:"pin-placeholder",style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"24px",fontWeight:"300"},children:"â€¢"})},t))}),S&&e.jsx(W,{name:"crescent",className:"loading-spinner enhanced-spinner"}),e.jsx("div",{style:{marginTop:"20px",padding:"12px",background:"rgba(255, 255, 255, 0.03)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.05)"},children:e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"12px",margin:"0",textAlign:"center",lineHeight:"1.3"},children:"ðŸ”’ Secure admin access required â€¢ All activities are logged and monitored"})})]})})})]}),i&&e.jsx("div",{className:`passcode-modal enhanced-modal ${o==="success"?"success":"error"}`,style:{background:o==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(10px)",border:o==="success"?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)",color:o==="success"?"rgba(34, 197, 94, 0.9)":"rgba(239, 68, 68, 0.9)",textShadow:"0 1px 2px rgba(0, 0, 0, 0.2)"},children:i})]})})};export{K as default};
